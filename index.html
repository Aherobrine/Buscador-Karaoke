<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Buscador de canciones</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>ðŸŽµ Buscador de canciones</h1>

  <input
    type="text"
    id="buscador"
    placeholder="Busca por artista o tÃ­tulo..."
  >

  <button id="randomBtn" class="btn-principal">
    ðŸŽ² No sÃ© quÃ© cantar
  </button>

  <p id="contador"></p>
</header>

<main>
  <ul id="lista"></ul>
</main>

<footer>
  <p>Â¿Listos para cantar?</p>
</footer>

<script>
const lista = document.getElementById("lista");
const buscador = document.getElementById("buscador");
const contador = document.getElementById("contador");
const randomBtn = document.getElementById("randomBtn");

let canciones = [];

/* ---------- utilidades ---------- */
function normalizar(texto) {
  return texto
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "")
    .toLowerCase();
}

/* ---------- cargar canciones ---------- */
async function cargarCanciones() {
  const res = await fetch("canciones.json");
  canciones = await res.json();
  mostrar();
}

/* ---------- mostrar lista ---------- */
function mostrar(filtro = "") {
  lista.innerHTML = "";

  const filtradas = canciones.filter(c =>
    normalizar(c.artista + " " + c.titulo)
      .includes(normalizar(filtro))
  );

  contador.textContent = `ðŸŽ¶ ${filtradas.length} canciones`;

  filtradas.forEach(c => {
    const li = document.createElement("li");
    li.innerHTML = `
      <span class="artista">${c.artista}</span>
      <span class="separador"> - </span>
      <span class="titulo">${c.titulo}</span>
    `;
    lista.appendChild(li);
  });
}

/* ---------- sugerir 5 aleatorias ---------- */
function sugerirAleatorias(n = 5) {
  if (!canciones.length) return;

  lista.innerHTML = "";
  contador.textContent = "ðŸŽ² Elige una de estas";

  const seleccion = [...canciones]
    .sort(() => 0.5 - Math.random())
    .slice(0, n);

  seleccion.forEach(c => {
    const li = document.createElement("li");
    li.innerHTML = `
      <span class="artista">${c.artista}</span>
      <span class="separador"> - </span>
      <span class="titulo">${c.titulo}</span>
    `;
    lista.appendChild(li);
  });
}

/* ---------- eventos ---------- */
buscador.addEventListener("input", e => mostrar(e.target.value));
randomBtn.addEventListener("click", () => sugerirAleatorias(5));

/* ---------- init ---------- */
cargarCanciones();
</script>

</body>
</html>
